{"version":3,"sources":["script.js"],"names":["findMeta","meta","Array","prototype","map","call","document","querySelectorAll","node","name","content","property","JSON","stringify","findNodePath","nodeName","parentNode","today","now","Date","getUTCFullYear","getUTCMonth","getUTCDate","collectPageData","url","window","location","href","title","element","collectElementData","selection","getSelection","type","date","anchor_path","anchorNode","focus_path","focusNode","anchor_offset","anchorOffset","focus_offset","focusOffset","highlighted","toString","chrome","runtime","onMessage","addListener","request","sender","sendResponse","method"],"mappings":"AACA,QAASA,YACR,GAAIC,GAAOC,MAAMC,UAAUC,IAAIC,KAAKC,SAASC,iBAAiB,QAAS,SAASC,GAC7E,MAAGA,GAAKC,MAETA,KAAKD,EAAKC,KACVC,QAAQF,EAAKE,SAGZF,EAAKG,UAENA,SAAUH,EAAKG,SACfD,QAASF,EAAKE,SAGT,MAGP,OAAOE,MAAKC,UAAUZ,IAAS,GAGhC,QAASa,cAAaN,GAElB,MAAIA,GAAKO,SAIY,SAAlBP,EAAKO,SACGP,EAAKO,SAGTD,aAAaN,EAAKQ,YAAc,IAAMR,EAAKO,SAPvC,GAUf,QAASE,SACL,GAAIC,GAAM,GAAIC,KACd,OAAOD,GAAIE,iBAAoB,IAAMF,EAAIG,cAAgB,IAAMH,EAAII,aAGvE,QAASC,mBACR,OACCtB,KAAMD,WACNwB,IAAKC,OAAOC,SAASC,KACrBC,MAAOtB,SAASsB,MAChBC,QAASC,sBAIX,QAASA,sBAER,GAAIC,GAAYN,OAAOO,cAEvB,OAAID,IAAgC,SAAnBA,EAAUE,MAK1BC,KAAMjB,QACNkB,YAAarB,aAAaiB,EAAUK,YACpCC,WAAYvB,aAAaiB,EAAUO,WACnCC,cAAeR,EAAUS,aACzBC,aAAcV,EAAUW,YACxBC,YAAaZ,EAAUa,YAThB,KAaTC,OAAOC,QAAQC,UAAUC,YAAY,SAASC,EAASC,EAAQC,GAEzDA,EADqB,gBAAnBF,EAAQG,OACG7B","file":"script.js","sourcesContent":["\nfunction findMeta(){\n\tvar meta = Array.prototype.map.call(document.querySelectorAll('meta'), function(node){\n    if(node.name) {\n        return{\n\t\t\tname:node.name,\n\t\t\tcontent:node.content\n\t\t};\n    }\n\tif(node.property){\n\t\treturn {\n\t\t\tproperty: node.property,\n\t\t\tcontent: node.content\n\t\t};\n\t}\n\treturn null;\n});\n\n\treturn JSON.stringify(meta) || \"\";\n}\n\nfunction findNodePath(node){\n\n    if(!node.nodeName){\n        return \"\";\n    }\n\n    if(node.nodeName === 'HTML') {\n        return node.nodeName;\n    }\n\n    return findNodePath(node.parentNode) + \" \" + node.nodeName;\n}\n\nfunction today(){\n    var now = new Date();\n    return now.getUTCFullYear() +  \"-\" + now.getUTCMonth() + \"-\" + now.getUTCDate();\n}\n\nfunction collectPageData(){\n\treturn {\n\t\tmeta: findMeta(),\n\t\turl: window.location.href,\n\t\ttitle: document.title,\n\t\telement: collectElementData()\n\t}\n}\n\nfunction collectElementData(){\n\n\tvar selection = window.getSelection();\n\n\tif(!selection || selection.type === \"None\"){\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tdate: today(),\n\t\tanchor_path: findNodePath(selection.anchorNode),\n\t\tfocus_path: findNodePath(selection.focusNode),\n\t\tanchor_offset: selection.anchorOffset,\n\t\tfocus_offset: selection.focusOffset,\n\t\thighlighted: selection.toString()\n\t}\n}\n\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {\n    if (request.method === \"getPageData\"){\n      sendResponse(collectPageData());\n\t}\n    else {\n      sendResponse({}); // snub them.\n\t}\n});\n\n"],"sourceRoot":"/source/"}